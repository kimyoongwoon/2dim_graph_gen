<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>차트 설정</title>
    <link rel="stylesheet" href="chart_config.css">
    <!-- ✅ Plotly.js (통합 시스템 - 모든 차트 타입) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>차트 설정</h2>
            <p>Multi-Dimensional Data Configuration</p>
        </div>
        <!-- 진행 단계 표시 -->
        <div class="step-indicator">
            <div class="step completed" id="step1">1. 데이터 생성</div>
            <div class="step active" id="step2">2. 차트 설정</div>
            <div class="step" id="step3">3. 시각화</div>
        </div>
        <!-- 데이터 정보 표시 -->
        <div id="data-info" class="data-info">
            <strong>데이터 로딩 중...</strong>
        </div>
        <!-- 차트 설정 섹션 -->
        <div class="section" id="chartConfigSection">
            <h4>2. 차트 설정</h4>
            <div class="chart-config">
                <div class="config-column">
                    <h5>차원 및 필드 선택</h5>
                    <!-- 2D/3D 모드 선택과 필드 선택기들이 동적으로 생성됨 -->
                    <div class="axis-mapping" id="axisMapping">
                    </div>
                </div>
                <div class="config-column">
                    <h5>차트 타입 및 옵션</h5>
                    <div class="axis-selector">
                        <label>차트 타입:</label>
                        <select id="chartTypeSelect">
                            <option value="">차트 타입 선택</option>
                        </select>
                    </div>
                    <div class="advanced-options">
                        <h6>고급 옵션 (통합 시스템 연동)</h6>
                        <div class="axis-selector">
                            <label>크기 스케일링:</label>
                            <select id="sizeScaling">
                                <option value="default">기본 선형</option>
                                <option value="sigmoid">시그모이드</option>
                            </select>
                        </div>
                        <div class="axis-selector" id="sigmoidKContainer" style="display: none;">
                            <label>시그모이드 K값:</label>
                            <input type="number" id="sigmoidK" value="1.0" min="0.1" max="10.0" step="0.1">
                        </div>
                        <small style="color: #666; font-style: italic;">
                            💡 차트 생성 후 고급 UI 컨트롤로 교체됩니다
                        </small>
                    </div>
                    <div class="controls">
                        <button onclick="createVisualization()" id="createChartBtn" disabled>통합 차트 생성</button>
                        <button onclick="goBackToGenerator()" class="secondary-btn">데이터 생성으로 돌아가기</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- 에러 표시 -->
        <div id="errorDisplay" class="error-display" style="display: none;"></div>
    </div>
    <script type="module" src="chart_config.js"></script>
</body>
</html>