<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>고차원 데이터 시각화</title>
    <link rel="stylesheet" href="style.css">
    <!-- ✅ Chart.js (2D 차트용) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"></script>
    <!-- ✅ Plotly.js (3D 차트용) - 추가됨 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>고차원 데이터 시각화</h2>
            <p>Multi-Dimensional Data Visualization</p>
        </div>

        <!-- 진행 단계 표시 -->
        <div class="step-indicator">
            <div class="step completed" id="step1">1. 데이터 생성</div>
            <div class="step active" id="step2">2. 차트 설정</div>
            <div class="step" id="step3">3. 시각화</div>
        </div>

        <!-- 데이터 정보 표시 -->
        <div id="data-info" class="data-info">
            <strong>데이터 로딩 중...</strong>
        </div>

        <!-- 차트 설정 섹션 -->
        <div class="section" id="chartConfigSection">
            <h4>2. 차트 설정</h4>
            <div class="chart-config">
                <div class="config-column">
                    <h5>차원 및 필드 선택</h5>
                    <!-- 🔧 수정: 차원선택을 숨김 (JavaScript에서 동적으로 생성) -->
                    <!-- 기존 차원선택 드롭다운 제거 -->
                    <div class="axis-mapping" id="axisMapping">
                        <!-- 2D/3D 모드 선택과 필드 선택기들이 동적으로 생성됨 -->
                    </div>
                </div>
                <div class="config-column">
                    <h5>차트 타입 및 옵션</h5>
                    <div class="axis-selector">
                        <label>차트 타입:</label>
                        <select id="chartTypeSelect">
                            <option value="">차트 타입 선택</option>
                        </select>
                    </div>
                    <div class="advanced-options">
                        <h6>고급 옵션</h6>
                        <div class="axis-selector">
                            <label>크기 스케일링:</label>
                            <select id="sizeScaling">
                                <option value="default">기본 선형</option>
                                <option value="sigmoid">시그모이드</option>
                            </select>
                        </div>
                        <div class="axis-selector" id="sigmoidKContainer" style="display: none;">
                            <label>시그모이드 K값:</label>
                            <input type="number" id="sigmoidK" value="1.0" min="0.1" max="10.0" step="0.1">
                        </div>
                    </div>
                    <div class="controls">
                        <button onclick="createVisualization()" id="createChartBtn" disabled>차트 생성</button>
                        <button onclick="goBackToGenerator()" class="secondary-btn">데이터 생성으로 돌아가기</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 에러 표시 -->
        <div id="errorDisplay" class="error-display" style="display: none;"></div>

        <!-- 메타데이터 표시 -->
        <div class="section" id="metadataSection" style="display: none;">
            <h4>3. 생성된 메타데이터</h4>
            <div id="metadataDisplay" class="metadata-display">메타데이터가 여기에 표시됩니다</div>
        </div>

        <!-- 차트 표시 -->
        <div class="chart-container" id="chartContainer" style="display: none;">
            <h3>시각화 결과</h3>
            <div id="chartInfo" class="chart-info">차트 정보가 여기에 표시됩니다</div>
            <!-- chart-canvas-wrapper는 JavaScript에서 동적 생성 -->
        </div>
    </div>

    <script type="module" src="graph_complete.js"></script>
</body>
</html>