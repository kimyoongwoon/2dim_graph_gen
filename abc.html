<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3dim_chart_gen 통합 차트 시스템 데모</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .demo-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .demo-tab {
            flex: 1;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
        }
        
        .demo-tab:hover {
            background: #e9ecef;
        }
        
        .demo-tab.active {
            background: #007bff;
            color: white;
        }
        
        .demo-content {
            padding: 20px;
        }
        
        .chart-section {
            display: none;
            margin-bottom: 30px;
        }
        
        .chart-section.active {
            display: block;
        }
        
        .chart-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }
        
        .chart-container {
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .code-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .code-section h4 {
            margin-top: 0;
            color: #495057;
        }
        
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 0;
        }
        
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            opacity: 0.9;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🚀 3dim_chart_gen</h1>
        <p>통합 다차원 시각화 시스템 - 2D/3D/4D 차트를 하나의 API로</p>
    </div>

    <div class="demo-container">
        <div class="demo-tabs">
            <div class="demo-tab active" onclick="showTab('overview')">📊 시스템 개요</div>
            <div class="demo-tab" onclick="showTab('2d-charts')">2D 차트</div>
            <div class="demo-tab" onclick="showTab('3d-charts')">3D 차트</div>
            <div class="demo-tab" onclick="showTab('4d-charts')">4D 차트</div>
            <div class="demo-tab" onclick="showTab('usage')">사용법</div>
        </div>

        <div class="demo-content">
            <!-- 시스템 개요 -->
            <div id="overview" class="chart-section active">
                <h2>🎯 프로젝트 개요</h2>
                <div class="chart-info">
                    <strong>3dim_chart_gen</strong>은 기존 3D 전용 차트 시스템을 <strong>2D/3D/4D 통합 플랫폼</strong>으로 확장한 
                    혁신적인 시각화 솔루션입니다. 단일 API로 모든 차원을 지원하며, 극도의 경량화를 통해 성능과 유지보수성을 극대화했습니다.
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">8개</div>
                        <div class="stat-label">차트 타입</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">95%</div>
                        <div class="stat-label">완성도</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">21개</div>
                        <div class="stat-label">파일 수</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">56%</div>
                        <div class="stat-label">함수 감소</div>
                    </div>
                </div>

                <h3>🏆 핵심 성과</h3>
                <div class="feature-list">
                    <div class="feature-item">
                        <strong>✅ 통합 API</strong><br>
                        generateChart() 하나로 모든 차원 지원
                    </div>
                    <div class="feature-item">
                        <strong>⚡ 조건부 최적화</strong><br>
                        3D Surface만 16개 제한, 나머지 무제한
                    </div>
                    <div class="feature-item">
                        <strong>🎨 스케일링 시스템</strong><br>
                        3종 크기 + 1종 색상 알고리즘
                    </div>
                    <div class="feature-item">
                        <strong>🎛️ UI 컨트롤</strong><br>
                        Show/Hide, 슬라이더 실제 동작
                    </div>
                    <div class="feature-item">
                        <strong>🧩 모듈화</strong><br>
                        기능별 독립 모듈로 확장 용이
                    </div>
                    <div class="feature-item">
                        <strong>📊 4차원 지원</strong><br>
                        위치+크기+색상 조합 시각화
                    </div>
                </div>

                <h3>📋 지원 차트 타입</h3>
                <div class="chart-info">
                    <strong>2D 차트 (3개):</strong> 2d_scatter, 2d_size, 2d_color<br>
                    <strong>3D 차트 (4개):</strong> 3d_scatter_color, 3d_scatter_size, 3d_size_color, 3d_surface_scatter<br>
                    <strong>4D 차트 (1개):</strong> 4d_scatter_size_color
                </div>
            </div>

            <!-- 2D 차트 -->
            <div id="2d-charts" class="chart-section">
                <h2>📈 2D 차트 시스템</h2>
                <div class="chart-info">
                    2차원 데이터 시각화를 위한 3가지 차트 타입을 제공합니다.
                    모든 2D 차트는 데이터 제한 없이 사용할 수 있습니다.
                </div>

                <h3>1. 2D Scatter (2d_scatter)</h3>
                <div class="chart-container" id="chart-2d-scatter"></div>
                
                <h3>2. 2D Size (2d_size)</h3>
                <div class="chart-container" id="chart-2d-size"></div>
                
                <h3>3. 2D Color (2d_color)</h3>
                <div class="chart-container" id="chart-2d-color"></div>

                <div class="code-section">
                    <h4>💻 사용 코드</h4>
                    <pre><code>// 2D Scatter 차트
const chart = generateChart(data, {
    type: '2d_scatter',
    dataMapping: {
        x: 'temperature',
        y: 'humidity'
    }
}, container);

// 2D Size 차트 (크기 스케일링)
const chart = generateChart(data, {
    type: '2d_size',
    dataMapping: {
        x: 'temperature',
        size: 'pressure'
    },
    scalingConfig: {
        type: 'sigmoid',
        params: { k: 2.0 }
    }
}, container);</code></pre>
                </div>
            </div>

            <!-- 3D 차트 -->
            <div id="3d-charts" class="chart-section">
                <h2>🎲 3D 차트 시스템</h2>
                <div class="chart-info">
                    3차원 데이터 시각화를 위한 4가지 차트 타입을 제공합니다.
                    실제 3D 렌더링(Surface)은 성능 최적화를 위해 16개 데이터로 제한됩니다.
                </div>

                <h3>1. 3D Scatter Color (3d_scatter_color)</h3>
                <div class="chart-container" id="chart-3d-scatter-color"></div>
                
                <h3>2. 3D Scatter Size (3d_scatter_size)</h3>
                <div class="chart-container" id="chart-3d-scatter-size"></div>
                
                <h3>3. 3D Size Color (3d_size_color)</h3>
                <div class="chart-container" id="chart-3d-size-color"></div>
                
                <h3>4. 3D Surface Scatter (3d_surface_scatter) - 실제 3D</h3>
                <div class="chart-container" id="chart-3d-surface-scatter"></div>

                <div class="code-section">
                    <h4>💻 사용 코드</h4>
                    <pre><code>// 3D Scatter Color 차트
const chart = generateChart(data, {
    type: '3d_scatter_color',
    dataMapping: {
        x: 'temperature',
        y: 'humidity',
        color: 'pressure'
    },
    colorConfig: {
        type: 'blueRed'
    }
}, container);

// 실제 3D Surface 차트 (16개 제한)
const chart = generateChart(data, {
    type: '3d_surface_scatter',
    dataMapping: {
        x: 'temperature',
        y: 'humidity',
        z: 'pressure'
    }
}, container);</code></pre>
                </div>
            </div>

            <!-- 4D 차트 -->
            <div id="4d-charts" class="chart-section">
                <h2>🎆 4D 차트 시스템</h2>
                <div class="chart-info">
                    4차원 데이터의 최대 시각화를 위한 차트입니다.
                    위치(X,Y) + 크기 + 색상을 모두 활용하여 4차원 정보를 2D 공간에 표현합니다.
                </div>

                <h3>4D Scatter Size Color (4d_scatter_size_color)</h3>
                <div class="chart-container" id="chart-4d-scatter-size-color"></div>

                <div class="code-section">
                    <h4>💻 사용 코드</h4>
                    <pre><code>// 4D 최대 차원 시각화
const chart = generateChart(data, {
    type: '4d_scatter_size_color',
    dataMapping: {
        x: 'temperature',    // X축 위치
        y: 'humidity',       // Y축 위치
        size: 'pressure',    // 마커 크기
        color: 'windSpeed'   // 마커 색상
    },
    scalingConfig: {
        type: 'linear',
        params: { a: 1.2, b: 5 }
    },
    colorConfig: {
        type: 'blueRed'
    }
}, container);</code></pre>
                </div>
            </div>

            <!-- 사용법 -->
            <div id="usage" class="chart-section">
                <h2>📖 사용법 가이드</h2>
                
                <h3>🚀 기본 설치 및 사용</h3>
                <div class="code-section">
                    <h4>1. HTML에서 사용</h4>
                    <pre><code>&lt;!-- Plotly.js 로드 --&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"&gt;&lt;/script&gt;

&lt;!-- 3dim_chart_gen 로드 --&gt;
&lt;script type="module"&gt;
    import { generateChart } from './3dim_chart_gen/index.js';
    
    const data = [
        { temp: 25, humidity: 60, pressure: 1013 },
        { temp: 30, humidity: 45, pressure: 1020 }
    ];
    
    const chart = generateChart(data, {
        type: '3d_scatter_color',
        dataMapping: {
            x: 'temp',
            y: 'humidity', 
            color: 'pressure'
        }
    }, document.getElementById('container'));
&lt;/script&gt;</code></pre>
                </div>

                <h3>⚙️ 고급 설정</h3>
                <div class="code-section">
                    <h4>2. 스케일링 및 색상 설정</h4>
                    <pre><code>const chart = generateChart(data, {
    type: '4d_scatter_size_color',
    dataMapping: {
        x: 'x_field',
        y: 'y_field',
        size: 'size_field',
        color: 'color_field'
    },
    scalingConfig: {
        type: 'sigmoid',     // 'default', 'linear', 'sigmoid'
        params: { k: 2.5 }   // Sigmoid 급경사도
    },
    colorConfig: {
        type: 'blueRed'      // 'blueRed', 'viridis', 'plasma'
    },
    options: {
        title: 'Custom Chart Title',
        width: 800,
        height: 600
    }
}, container);</code></pre>
                </div>

                <h3>🎛️ UI 컨트롤 추가</h3>
                <div class="code-section">
                    <h4>3. 컨트롤 패널 및 슬라이더</h4>
                    <pre><code>import { createControlPanel, createSliderContainer } from './3dim_chart_gen/utils/ui_controls.js';

// 차트 생성 후
const chart = generateChart(data, config, container);

// 컨트롤 패널 추가 (3D 차트에서 Show/Hide 버튼 자동 활성화)
const controlPanel = createControlPanel(container, chart);

// 슬라이더 추가
const sliders = createSliderContainer(container, [
    {
        name: 'temperature',
        label: '온도 필터',
        min: 0, max: 100, value: 25,
        mode: 'range'  // ≥/≤/= 버튼 표시
    }
]);</code></pre>
                </div>

                <h3>📊 이벤트 처리</h3>
                <div class="code-section">
                    <h4>4. 차트 이벤트 및 제어</h4>
                    <pre><code>// 이벤트 리스너 등록
chart.on('dataUpdated', (newData) => {
    console.log('데이터 업데이트:', newData.length);
});

chart.on('dataLimited', (info) => {
    console.log(`데이터 제한: ${info.displayed}/${info.total}`);
});

// 차트 제어 (3D 차트용)
chart.toggleTrace('surface', false);  // Surface 숨김
chart.adjustOpacity(0.5, 0.9);        // 투명도 조정

// 데이터 업데이트
chart.updateData(newDataArray);

// 리소스 정리
chart.destroy();</code></pre>
                </div>

                <div class="feature-list">
                    <div class="feature-item">
                        <strong>🔄 하위 호환성</strong><br>
                        generateChart3D도 계속 사용 가능
                    </div>
                    <div class="feature-item">
                        <strong>📱 반응형</strong><br>
                        Plotly responsive로 자동 크기 조정
                    </div>
                    <div class="feature-item">
                        <strong>🛡️ 에러 안전성</strong><br>
                        모든 단계에서 안전한 에러 처리
                    </div>
                    <div class="feature-item">
                        <strong>🎯 성능 최적화</strong><br>
                        필요한 경우에만 데이터 제한
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 탭 전환 함수
        function showTab(tabName) {
            // 모든 탭 비활성화
            document.querySelectorAll('.demo-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.chart-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // 선택된 탭 활성화
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // 가상 데이터 생성
        function generateSampleData(count = 50) {
            const data = [];
            for (let i = 0; i < count; i++) {
                data.push({
                    temperature: Math.random() * 40 + 10,  // 10-50도
                    humidity: Math.random() * 60 + 20,     // 20-80%
                    pressure: Math.random() * 50 + 1000,   // 1000-1050hPa
                    windSpeed: Math.random() * 20 + 5,     // 5-25km/h
                    category: Math.floor(Math.random() * 3) + 1
                });
            }
            return data;
        }

        // 데모 차트 생성 (실제로는 3dim_chart_gen을 사용해야 함)
        function createDemoCharts() {
            const data = generateSampleData(30);
            
            // 간단한 시연용 차트들 (실제 시스템 대신)
            const charts = [
                'chart-2d-scatter', 'chart-2d-size', 'chart-2d-color',
                'chart-3d-scatter-color', 'chart-3d-scatter-size', 
                'chart-3d-size-color', 'chart-3d-surface-scatter',
                'chart-4d-scatter-size-color'
            ];
            
            charts.forEach(chartId => {
                const element = document.getElementById(chartId);
                if (element) {
                    // 실제로는 generateChart() 함수를 사용
                    element.innerHTML = `
                        <div style="
                            height: 100%; 
                            display: flex; 
                            align-items: center; 
                            justify-content: center;
                            background: linear-gradient(45deg, #f0f8ff, #e6f3ff);
                            border-radius: 8px;
                            color: #666;
                            font-size: 1.1em;
                        ">
                            📊 ${chartId.replace('chart-', '').replace(/-/g, '_').toUpperCase()} 차트<br>
                            <small style="margin-top: 10px; display: block;">실제 구현에서는 generateChart() 사용</small>
                        </div>
                    `;
                }
            });
        }

        // 페이지 로드 시 데모 차트 생성
        document.addEventListener('DOMContentLoaded', createDemoCharts);
    </script>
</body>
</html>